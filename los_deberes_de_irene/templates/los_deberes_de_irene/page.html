{% extends "los_deberes_de_irene/base.html" %}

{% load static %}

{% block main-class %}page{% endblock %}

{% block content %}
  <div class="sidebar">
    <p class="heading">tama√±o</p>
    <div class="option-buttons">
      <button class="option-button size-button" data-font-size="small">
        <img class="unselected-img" src="{% static 'img/font-size-small.svg' %}"></img>
        <img class="selected-img" src="{% static 'img/font-size-small-selected.svg' %}"></img>
      </button>
      <button class="option-button size-button" data-font-size="medium">
        <img class="unselected-img" src="{% static 'img/font-size-medium.svg' %}"></img>
        <img class="selected-img" src="{% static 'img/font-size-medium-selected.svg' %}"></img>
      </button>
      <button class="option-button size-button" data-font-size="big">
        <img class="unselected-img" src="{% static 'img/font-size-big.svg' %}"></img>
        <img class="selected-img" src="{% static 'img/font-size-big-selected.svg' %}"></img>
      </button>
    </div>

    <div class="separator"></div>

    <p class="heading">color</p>
    <div class="option-buttons">
      <button class="option-button color-button" data-color="black">
        <img src="{% static 'img/font-color-black.svg' %}"></img>
      </button>
      <button class="option-button color-button" data-color="blue">
        <img src="{% static 'img/font-color-blue.svg' %}"></img>
      </button>
      <button class="option-button color-button" data-color="red">
        <img src="{% static 'img/font-color-red.svg' %}"></img>
      </button>
    </div>

    <div class="separator"></div>

    <div class="option-buttons">
      <a class="option-button" href="{% url 'browser' back_folder %}">
        <img src="{% static 'img/back-button.svg' %}"></img>
      </a>
    </div>
  </div>

  <div class="header page">
    <img class="header-logo" src="{% static 'img/logo-deberes-de-irene.svg' %}" />

    <div class="header-title">
      {% if user.profile.is_teacher %}
      [{{ page.owner.username }}]&nbsp;
      {% endif %}
      {{ page.name }}
    </div>
    <a class="header-button" href="{% url 'browser' back_folder %}">
      Volver
    </a>
  </div>

  <div id="page-viewport">
    <input id="label-input" type="text"></input>
    <svg xmlns="http://www.w3.org/2000/svg" width="1000" height="1000"
        viewBox="0 0 {{ page.image.width }} {{ page.image.height }}">
      <image x="0" y="0" width="{{ page.image.width }}" height="{{ page.image.height }}"
          href="{{ page.image.url }}"></image>
      <g id="labels">
        {% for label in labels %}
          <text id="label-{{ label.id }}" class="page-label"
              data-font-size="{{ label.font_size }}" data-color="{{ label.color }}"
              x="{{ label.x }}" y="{{ label.y }}">
            {{ label.text }}
          </text>
        {% endfor %}
      </g>
    </svg>
  </div>

{% endblock %}

{% block extra_scripts %}
  <script type="module">
    import { setupPage } from "{% static '/js/page.js' %}";
    setupPage({{ page.id }}, {{ page.image.width }}, {{ page.image.height }});
  </script>
{% endblock %}

